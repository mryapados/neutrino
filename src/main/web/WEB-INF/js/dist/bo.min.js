!function(){var a=angular.module("frontApp",["frontServices","ui.bootstrap","textAngular","ngSanitize","pascalprecht.translate","ngCookies","ngResource"]);a.config(function(a){var b;angular.injector(["ngCookies"]).invoke(["$cookies",function(a){b=a}]),a.useSanitizeValueStrategy("sanitize");var c=b.get("language");void 0==c&&(c="en"),a.preferredLanguage(c),a.useLoader("i18nLoader")}),a.run(function(a){}),a.factory("i18nLoader",function(a,b,c){return function(d){var e=b.defer();return a.get(c.URL_I18N+d.key+".json").then(function(a){e.resolve(a.data)}).catch(function(a){console.log(a.status),console.log(a),e.reject(d.key)}),e.promise}})}();var fModule=angular.module("frontApp");fModule.controller("DatepickerPopupCtrl",function(a){function b(a){var b=a.date;return"day"===a.mode&&(0===b.getDay()||6===b.getDay())}function c(b){var c=b.date;if("day"===b.mode)for(var d=new Date(c).setHours(0,0,0,0),e=0;e<a.events.length;e++){var f=new Date(a.events[e].date).setHours(0,0,0,0);if(d===f)return a.events[e].status}return""}a.init=function(b){a.dt=new Date(b)},a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.inlineOptions={customClass:c,minDate:new Date,showWeeks:!0},a.dateOptions={dateDisabled:b,formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},a.toggleMin=function(){a.inlineOptions.minDate=a.inlineOptions.minDate?null:new Date,a.dateOptions.minDate=a.inlineOptions.minDate},a.toggleMin(),a.open1=function(){a.popup1.opened=!0},a.open2=function(){a.popup2.opened=!0},a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[0],a.altInputFormats=["M!/d!/yyyy"],a.popup1={opened:!1},a.popup2={opened:!1};var d=new Date;d.setDate(d.getDate()+1);var e=new Date;e.setDate(d.getDate()+1),a.events=[{date:d,status:"full"},{date:e,status:"partially"}]});var fModule=angular.module("frontApp");fModule.controller("WysiwygEditorCtrl",function(a,b){a.version=b.getVersion(),a.versionNumber=a.version.substring(1),a.disabled=!1}),function(){var a=angular.module("frontApp");a.directive("uiAssignment",function(a,b){return{restrict:"E",require:"?ngModel",transclude:!0,templateUrl:b.URL_TEMPLATE_JS+"ui-assignement.html",controller:function(b,c){b.open=function(d){c.getObjects(b[b.model],b.type,b.id,b.field,b.disablePreChecked,d).then(function(c){a(b.model).assign(b.$parent,c)}).catch(function(a){console.log(a.status),console.log(a)})}},scope:!0,link:function(a,b,c,d){a.type=c.type,a.field=c.field,a.id=c.id,a.model=c.ngModel,a.disablePreChecked="true"==c.disablePreChecked}}}),a.directive("input",function(a,b,c,d,e){return{restrict:"E",require:"?ngModel",controller:function(a,b,f){if(f.assign){var g=!1;f.disablePreChecked&&(g=f.disablePreChecked);var h=f.assign.split("_"),i=h[0],j=h[1],k=h[2],l=f.ngModel,m=c('<data-ui-assignment type="'+i+'" field="'+k+'" id="'+j+'" ng-model="'+l+'" disable-pre-checked="'+g+'"/></data-ui-assignment>')(a);b.parent().append(m);var n=f.ngModel+"Text",o=c('<ul class="linked"><li data-ng-repeat="r in '+n+' | orderBy: \'name\'"><a class="linked" href="#">{{r.name}}</a></li><li data-ng-show="'+l+".length - "+n+'.length > 0"><strong><a href="#">{{'+l+".length - "+n+".length}} <span>Others results...</span></a></strong></li></ul>")(a);b.parent().append(o),a.$watch(l,function(){var b=5,c=a[l];if(c&&c.length>0){b?c.length<b&&(b=c.length):b=c.length;for(var f=c[0].type,g=[],h=0;h<b;h++)c[h].id&&g.push(c[h].id);console.log(g),g.length>0&&d.get(e.URL_SERVER_REST+"bo/objects/"+f,{params:{id:g}}).then(function(b){a[n]=b.data})}})}},link:function(c,d,e,f){e.ngModel&&e.assign&&(a(e.ngModel).assign(c,b(e.value,"toArray")),f.$parsers.push(function(a){return b(a,"toArray")}),f.$formatters.push(function(a){return b(a)}))}}})}(),function(){angular.module("frontApp")}(),function(){angular.module("frontApp").filter("idProviders",function(){return function(a,b){if(b||(b="toString"),"toArray"==b){var c=a.split(","),d=[];return angular.forEach(c,function(a){if(""!=a){var b=a.split("_");d.push({type:b[0],id:Number(b[1])})}}),d}var c="";return angular.forEach(a,function(a){c+=a.type+"_"+a.id+","}),c}})}(),function(){angular.module("frontServices",["FileManagerApp"]);angular.module("FileManagerApp").config(["fileManagerConfigProvider",function(a){var b=a.$get();a.set({appName:"angular-filemanager",pickCallback:function(a){var b='Picked %s "%s" for external use'.replace("%s",a.type).replace("%s",a.fullPath());window.alert(b)},allowedActions:angular.extend(b.allowedActions,{pickFiles:!1,pickFolders:!1})})}])}(),function(){angular.module("frontServices").constant("$frontPath",{URL_SERVER_REST:"/neutrino/",URL_TEMPLATE_JS:"/neutrino/js/src/bo/templates/",URL_I18N:"/neutrino/js/src/bo/i18n/"})}(),function(){var a=angular.module("frontApp");a.service("UiAssignmentService",function(a,b,c,d){self=this,self.getObjects=function(e,f,g,h,i,j,k,l){e||b.error("values is mandatory !"),f||b.error("objectType is mandatory !"),h||b.error("objectField is mandatory !"),j||(j="lg"),k||(k=5),l||(l=0);var m=a.defer();return c.open({templateUrl:d.URL_TEMPLATE_JS+"ui-assignement-modal.html",controller:"UiAssignmentModalCtrl",size:j,resolve:{values:function(){return e},urlInfos:function(){return{type:f,field:h,id:g,pageable:{size:k,page:l}}},disablePreChecked:function(){return i}}}).result.then(function(a){m.resolve(a),console.log("idProviders = "),console.log(a)},function(){console.log("Modal dismissed at: "+new Date)}),m.promise}}),a.controller("UiAssignmentModalCtrl",function(a,b,c,d,e){console.log("in UiAssignmentModalCtrl"),a.init=function(b){a.values=[],angular.extend(a.values,c);for(var d=0;d<a.values.length;d++)a.lastCheckedId=a.values[d].id,a["chk"+a.values[d].id]=!0,b===!0&&(a["dsb"+a.values[d].id]=!0)},a.init(e),a.updateValues=function(b,c,d){if(d)a.values.push({type:b,id:c});else{for(var e=null,f=0;f<a.values.length;f++)if(a.values[f].id==c&&a.values[f].type==b){e=f;break}null!=e&&a.values.splice(e,1)}console.log(a.values)},a.overrideValues=function(b,c){a.values=[{type:b,id:c}]},a.cancel=function(){b.dismiss("cancel")},a.save=function(c){c.$valid?b.close(a.values):b.dismiss("cancel")},a.mkParams=function(a){var b="",c="?";return a.size&&(b+=c+"size="+a.size,c="&"),a.sort&&(b+=c+"sort="+a.sort,c="&"),a.page&&(b+=c+"page="+a.page,c="&"),b},a.mkUrl=function(b){var c=""==b.id?0:b.id,d="/neutrino/bo/blocklist/"+b.type+"/"+c+"/"+b.field;a.urlInfos=b,a.urlMaked=d+a.mkParams(b.pageable),a.init()},a.updateUrlType=function(b){d.type=b,a.mkUrl(d)},a.updateUrlPageableSize=function(b){d.pageable.size=b,a.mkUrl(d)},a.updateUrlPageableSort=function(b){d.pageable.sort=b,a.mkUrl(d)},a.updateUrlPageablePage=function(b){d.pageable.page=b,a.mkUrl(d)},a.mkUrl(d)})}();